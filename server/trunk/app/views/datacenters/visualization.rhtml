<%- @page_title = "Visualization of Datacenter: " + h(@datacenter.name) %>

<%- column_count = 3 -%>
<%- row_count = (@datacenter.racks.count / column_count).to_i + 1 -%>
<%- rack_index = 0 -%>
<table style="width:100%">
<tbody>
<%- row_count.times do -%>
<tr>
  <%- column_count.times do -%>
    <td>
    <%- if rack_index < @datacenter.racks.count -%>
      <%= render :partial => 'racks/rack_visualization', :locals => { :rack => @datacenter.racks.fetch(rack_index) } %>
    <%- else -%>
    &nbsp;
    <%- end -%>
    </td>
  <%- rack_index = rack_index + 1 -%>
  <%- end -%>
</tr>
<%- end -%>
</tbody>
</table>